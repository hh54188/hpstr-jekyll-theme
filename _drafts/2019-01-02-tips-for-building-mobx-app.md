# 构建大型 Mobx 应用的几个建议

Mobx 与 Redux 相似，都是适用于应用状态管理的出色工具。它同样遵循单向数据流，同样能与 React 搭档配合。与 Redux 不同的是，它的上手更加简单（概念更少），框架体系更加完善（比如它自带异步操作的解决方案，而 Redux 只提供了中间件体系，必须借助第三方类库实现）。如果说 Redux 只是继承了 Flux 的衣钵的话，那么 Mobx 则是基于 Flux 的再一次进化

Mobx 是一枚优秀的工具，但是它的学习资料却非常有限，即使是官网的文档也还是拘泥于 API 的讲解而缺乏实战的例子（个人在这里推荐 [MobX Quick Start Guide](https://www.amazon.cn/gp/product/B07FZ2DRF6) 这本薄薄的册子是比官网更好的入门）。

从去年下半年开始工作项目中的状态管理框架逐渐从 Redux 替换为 Mobx，这些项目中同样需要处理大量的数据和复杂的交互，于是逐渐在这方面积攒了一些经验。这些经验大多是我个人踩过的坑，这些坑倒不是技术上的难点痛点，而是如何让程序更易于维护的技巧和模式。希望对那些正在使用 Mobx 做开发的同学有所帮助。这其中会使用 Redux 的开发模式进行对比，更易于理解

## 将一切状态存储在 Mobx 中

我们回忆一下在完整的 Redux 应用中，单个页面中会存在哪些状态（独立拆分的 reducer）：

- 业务状态：比如注册功能中用户需要填写的信息
- UI状态：比如提交按钮是否可以点击，是否需要展示错误提示
- 应用状态：应用是处于离线还是上线状态，用户是否登录

React 组件的状态属性来源也同时有好几个渠道：

- 父组件自身的状态
- store 的注入
- store 经过 selector 计算之后注入的 

那么当我们尝试追溯或者 debug 某个属性的来源时，面临的是 (3 × 3 = )9 种的可能

