# 仪表盘场景前端优化经验谈

相信绝大部分公司的中台系统中都存在仪表盘页面，以 [Ant Design Pro](https://pro.ant.design/index-cn) 提供的中台方案分析页面为例，通常仪表盘页面的形式如下。仪表盘由不同的图表卡片组成，并且在创建或者编辑时允许作者添加、删除卡片，拖拽卡片的位置和调整卡片的大小等等：

![](./images/dashboard-optimize/dashboard_sample.png)

图表卡片支持多种类型的图表展现，除了传统的折线图与柱状图外，还支持桑吉图、漏斗图甚至表格等等，以满足产品和运营同学以不同的角度洞察指标的变化的需求。但是无论卡片的展现形式有多么的千变万化，背后都需要后端精确的数据的予以支撑。

考虑到卡片是仪表盘的最小单元，彼此之间相互独立，并且可以被动态的添加。所以在产品的设计阶段，前端与后端同学约定接口时也是以卡片为中心，这样更加灵活。我们为卡片准备了两类接口, 为了便于描述，我们将接口简化和语义化：

1. `/meta`: 用于请求卡片的元信息，例如指标、维度、图表类型等
2. `/query`: 根据卡片的元信息查询图表数据，数据返回之后再进行渲染

之所以要将查询接口与元信息接口拆分开，是因为查询 payload 中除了元信息以外还要整合诸如全局的日期，筛选条件等额外信息

所以在前端实现中